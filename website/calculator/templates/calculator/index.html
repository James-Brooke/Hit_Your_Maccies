{% extends 'calculator/base.html' %}

{% block content %}
  <div style="overflow-x:auto;">

    {% if get %}
        <p>How many grams of protein do you need? The most calorific thing on the menu is:</p>
    {% else %}
        {% if best.quantity > 1 %}
            <p class="summary">Your best option is to order {{ best.quantity }} of {{ best.name }}.</p>
        {% else %}
            <p class="summary">Your best option is to order 1 {{ best.name }}.</p>
        {% endif %}
        <p class="summary">That will get you a total of:</p>
        <table class ="SummaryTable">
                <tr> 
                    <td>protein</td>
                    <td>{{ best.pro }}g</td>
                </tr>
                <tr> 
                    <td>calories</td>
                    <td>{{ best.cal }}</td>
                </tr>
                <tr> 
                    <td>fat</td>
                    <td>{{ best.fat }}g</td>
                </tr>
                <tr> 
                    <td>saturated fat</td>
                    <td>{{ best.sfat }}g</td>
                </tr>
                <tr> 
                    <td>carbohydrates</td>
                    <td>{{ best.carb }}g</td>
                </tr>
                <tr> 
                    <td>sugar</td>
                    <td>{{ best.sgr }}g</td>
                </tr>
                <tr>
                    <td>salt</td>
                    <td>{{ best.salt }}mg</td>
                </tr>
                <tr> 
                    <td>fibre</td>
                    <td>{{ best.fbr }}g</td>
                </tr>
    {% endif %}


    <table id="t01">
        <tr>
            <th>Menu Item</th>
            <th>Calories</th>
            <th>Fat</th>
            <th>Saturated fat</th>
            <th>Trans fat</th>
            <th>Cholesterol</th>
            <th>Salt</th>
            <th>Carbohydrates</th>
            <th>Fibre</th>
            <th>Sugar</th>
            <th>Protein</th>
            <th>Category</th>
            <th>Quantity</th>
            <th>Total Protein</th>
        </tr>
        {% for item in foods %}
        {% if item.quantity >= 1 %}
        <tr> 
            <td>{{ item.name }}</td>
            <td>{{ item.cal }}</td>
            <td>{{ item.fat }}</td>
            <td>{{ item.sfat }}</td>
            <td>{{ item.tfat }}</td>
            <td>{{ item.chol }}</td>
            <td>{{ item.salt }}</td>
            <td>{{ item.carb }}</td>
            <td>{{ item.fbr }}</td>
            <td>{{ item.sgr }}</td>
            <td>{{ item.pro }}</td>
            <td>{{ item.category }}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ item.total_protein }}</td>
        </tr>
        {% endif %}
        {% endfor %}
    </table>
  </div>


  <form method="post" novalidate>
    {% csrf_token %}
    {{ form }}
    <button type="submit">Submit</button>
  </form>

  {% endblock %}
